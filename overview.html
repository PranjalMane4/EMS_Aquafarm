<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EMS</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="assets/plugins/fontawesome-free/css/all.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="assets/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="assets/dist/css/adminlte.min.css">
  <!-- <link rel="stylesheet" href="assets/plugins/fontawesome-free/css/all.min.css"> -->

</head>

<style>
  .blur {
    filter: blur(5px);
  }

  #channel_KWH {
    width: 100%;
    height: 50%;
  }

  #channel_KWH22 {
    width: 100%;
    max-width: 100%;
    height: 500px;
  }

  #channel_KWH33 {
    width: 100%;
    max-width: 100%;
    height: 500px;
  }

  .card {
    /* height: 150px; */
    background-color: black;
    color: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(5px);
  }
</style>

<body class="hold-transition dark-mode sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed">
  <div class="wrapper">

    <!-- Preloader -->
    <div class="preloader flex-column justify-content-center align-items-center">
      <img class="animation__wobble" src="" alt="" height="60" width="60">
    </div>

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-dark" style="margin-left: 0;">
      <!-- Left navbar links -->
      <ul class="navbar-nav">
        <!-- <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li> -->
        <li class="nav-item d-none d-sm-inline-block">
          <a href="login.html" class="nav-link">Home</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="index.html" class="nav-link">Monitor view</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="index2.html" class="nav-link">Overview</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="livemeter.html" class="nav-link">Meter Status</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="report.html" class="nav-link">Reports</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="mailindex.html" class="nav-link">Mail</a>
        </li>
      </ul>

      <!-- Right navbar links -->
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="window.history.back()" role="button">
            <i class="fas fa-arrow-left"></i> Back
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="location.reload()" role="button">
            <i class="fas fa-sync-alt"></i> Refresh
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="fullscreen" href="#" role="button">
            <i class="fas fa-expand-arrows-alt"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
            <i class="fas fa-th-large"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
            <img src="images/Aquapharm.jpg" alt="" class="" style="height: 50px; width: 50px; margin-top: -20px;">
          </a>
        </li>
      </ul>

    </nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4" style="display: none;">
      <!-- Brand Logo -->
      <a href="index3.html" class="brand-link">
        <img src="" alt="" class="brand-image img-circle elevation-3" style="opacity: .8">
        <span class="brand-text font-weight-light">
          <h1><b>EMS</b></h1>
        </span>
      </a>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Sidebar user panel (optional) -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
          <div class="image">
            <!-- <img src="assets/dist/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image"> -->
          </div>
          <div class="info">
            <a href="#" class="d-block"></a>
          </div>
        </div>

        <!-- SidebarSearch Form -->
        <div class="form-inline">
          <div class="input-group" data-widget="sidebar-search">
            <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
            <div class="input-group-append">
              <button class="btn btn-sidebar">
                <i class="fas fa-search fa-fw"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" style="margin-left: 30px; margin-right: 30px; ">
      <!-- Content Header (Page header) -->
      <div class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1 class="m-0"></h1>
            </div><!-- /.col -->
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-right">
                <!-- <li class="breadcrumb-item"><a href="#">Home</a></li> -->
                <!-- <li class="breadcrumb-item active">Dashboard v2</li> -->
              </ol>
            </div><!-- /.col -->
          </div><!-- /.row -->
        </div><!-- /.container-fluid -->
      </div>
      <!-- /.content-header -->

      <section class="content">
        <div class="container-fluid">
          <!-- ./col -->

          <div class="row">
            <div class=" col-6">
              <div class="card" style="height: 220px;">
                <h4 style="margin-left: 300px;">Transformer Consumption</h4>
                <div class="row">
                  <div class="col-4">
                    <div class="small-box bg-info"
                      style="height: 150px; width: 250px; margin-right: 20px; margin-left: 20px;">
                      <div class="inner">
                        <!-- <h4>Transformer Consumption</h4> -->
                        <div class="row">
                          <div id="transformer_consumption_live" class="col-4">
                            <h4>Live</h4>
                            <p id="live_value">
                              <!-- Live consumption value will appear here -->
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="icon">
                        <i class="ion ion-bag"></i>
                      </div>
                    </div>

                  </div>

                  <div class="col-4">

                    <div class="small-box bg-info"
                      style="height: 150px; width: 250px; margin-right: 20px;margin-left: 10px;">
                      <div class="inner">
                        <!-- <h4>Transformer Consumption</h4> -->
                        <div class="row">
                          <div id="transformer_consumption_yesterday" class="col-4">
                            <h4>Yesterday</h4>
                            <p id="yesterday_value">
                              <!-- Today's consumption value will appear here -->
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="icon">
                        <i class="ion ion-bag"></i>
                      </div>
                    </div>
                  </div>
                  <div class="col-4">

                    <div class="small-box bg-info" style="height: 150px; width: 250px; ">
                      <div class="inner">
                        <!-- <h4>Transformer Consumption</h4> -->
                        <div class="row">
                          <div id="transformer_consumption_month" class="col-4">
                            <h4>Month</h4>
                            <p id="month_value">
                              <!-- Monthly consumption value will appear here -->
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="icon">
                        <i class="ion ion-bag"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <!-- ////////////////////////////////generator/////////////////////// -->

            <div class=" col-6">
              <div class="card" style="height: 220px;">
                <h4 style="margin-left: 300px;">Generator Consumption</h4>
                <div class="row">
                  <div class="col-4">

                    <div class="small-box bg-info"
                      style="height: 150px; width: 250px; margin-right: 20px; margin-left: 20px;">

                      <div class="inner">
                        <div class="row">
                          <div id="Generator_consumption_live" class="col-4">
                            <h5>Live</h5>
                            <p id="GENlive_value">
                              <!-- Live consumption value will appear here -->
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="icon">
                        <i class="ion ion-bag"></i>
                      </div>
                    </div>
                  </div>
                  <div class="col-4">

                    <div class="small-box bg-info"
                      style="height: 150px; width: 250px; margin-right: 20px;margin-left: 10px;">

                      <div class="inner">
                        <div class="row">
                          <div id="Generator_consumption_yesterday" class="col-4">
                            <h5>Yesterday</h5>
                            <p id="GENyesterday_value"></p>
                          </div>
                        </div>
                      </div>
                      <div class="icon">
                        <i class="ion ion-bag"></i>
                      </div>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="small-box bg-info" style="height: 150px; width: 250px; ">
                      <div class="inner" style="align-items: center;">
                        <div class="row">
                          <div id="Generator_consumption_month" class="col-4">
                            <h5>Month</h5>
                            <p id="GENmonth_value"></p>
                          </div>
                        </div>
                      </div>
                      <div class="icon">
                        <i class="ion ion-bag"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class=" col-6">
            <div class="small-box bg-success"  style="height: 150px;">
              <div class="inner">
                <h5>Generator Consumption</h5>
                <p id="Generator_consumption_live"> Live</p>
                <p id="Generator_consumption_yesterday">Yesterday </p>
                <p id="Generator_consumption_month">Month </p>
              </div>
              <div class="icon">
                <i class="ion ion-stats-bars"></i>
              </div>
            </div>
        </div> -->
            <div class=" col-6">
              <!-- small box -->
              <div class="small-box bg-warning" style="height: 70px;">
                <div class="inner">
                  <h5>Meter Status</h5>
                  <p id="activeMeterCount">Active Meters: 0</p>
                </div>
                <div class="icon">
                  <i class="ion ion-person-add"></i>
                </div>
                <!-- <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a> -->
              </div>
            </div>


            <div class=" col-6">
              <!-- small box -->
              <div class="small-box bg-warning" style="height: 70px;">
                <div class="inner">
                  <h5>Meter Status</h5>
                  <p id="inactiveMeterCount">Inactive Meters: 0</p>
                </div>
                <div class="icon">
                  <i class="ion ion-person-add"></i>
                </div>
                <!-- <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a> -->
              </div>
            </div>
          </div>


          <!-- PIE CHART START-->
          <div class="row">

            <div class="col-6">
              <div class="card card-danger">
                <div class="card-header">
                  <h3 class="card-title">Transformer</h3>
                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                      <i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
                <div class="card-body">
                  <div id="channel_KWH22" style="height: 50vh; color:#ffffff;"></div>
                  <!-- <div id="channel_KWH22" style="height: 50vh; color:#000000;"></div> -->

                </div>
              </div>
            </div>
            <div class="col-6">
              <div class="card card-danger">
                <div class="card-header">
                  <h3 class="card-title">Generator</h3>
                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                      <i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
                <div class="card-body">
                  <div id="channel_KWH33" style="height: 50vh; color:#ffffff;"></div>
                </div>
              </div>
            </div>
          </div>



      </section>
    </div>
    <!-- /.content-wrapper -->

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
    </aside>
    <!-- /.control-sidebar -->

    <!-- Main Footer -->
    <!-- <footer class="main-footer">
    <strong>Copyright &copy; 2024-2025 <a href="">Orbittal</a>.</strong>
    All rights reserved.
    <div class="float-right d-none d-sm-inline-block">
      <b>Version</b> 3.2.0
    </div>
  </footer> -->


  </div>
  <!-- ./wrapper -->

  <!-- REQUIRED SCRIPTS -->
  <!-- JQuery min js -->
  <script src="assets/plugins/jquery/jquery.min.js"></script>

  <!-- Bootstrap -->
  <script src="assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- overlayScrollbars -->
  <script src="assets/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
  <!-- AdminLTE App -->
  <script src="assets/dist/js/adminlte.js"></script>
  <!-- ChartJS -->
  <!-- <script src="../../plugins/chart.js/Chart.min.js"></script> -->

  <!-- PAGE PLUGINS -->
  <!-- jQuery Mapael -->
  <script src="assets/plugins/jquery-mousewheel/jquery.mousewheel.js"></script>
  <script src="assets/plugins/raphael/raphael.min.js"></script>
  <script src="assets/plugins/jquery-mapael/jquery.mapael.min.js"></script>
  <script src="assets/plugins/jquery-mapael/maps/usa_states.min.js"></script>
  <!-- ChartJS -->
  <script src="assets/plugins/chart.js/Chart.min.js"></script>
  <!-- <script src="../../plugins/chart.js/Chart.min.js"></script> -->

  <!-- amcharts -->
  <script src="https://www.amcharts.com/lib/4/core.js"></script>
  <script src="https://www.amcharts.com/lib/4/charts.js"></script>
  <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>


  <script src="/socket.io/socket.io.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js"></script>


  <!-- AdminLTE for demo purposes -->
  <script src="assets/dist/js/demo.js"></script>
  <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
  <script src="assets/dist/js/pages/dashboard2.js"></script>


  <script>

    var socket = io();

    //////////// Transformer chart strt /////////////////
    socket.emit('get_transformer_data_Chart', 'get_transformer_data_Chart');
    // socket.on("send_transformer_data_Chart", function (load_arr) {
    //     console.log("send_transformer_data_Chart:::::", load_arr);
    //     var load_data_value_arr = [];

    //     for (var k = 0; k < load_arr.length; k = k + 2) {
    //         // Check if the properties are defined before accessing them
    //         load_arr.forEach(function (data) {
    //         load_data_value_arr.push({
    //             week: data.day_of_week,
    //             KWH: data.total_kWh
    //         });

    //             console.log("load_data_value_arr222222222222222222222:::", load_data_value_arr);
    //           });
    //         }

    //     am4core.ready(function () {
    //         // Themes begin
    //         am4core.useTheme(am4themes_animated);
    //         // Themes end

    //         // Create chart instance
    //         var chart = am4core.create("channel_KWH22", am4charts.XYChart);

    //         chart.data = load_data_value_arr;

    //         // Create axes
    //         var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
    //         categoryAxis.dataFields.category = "week";
    //         categoryAxis.renderer.grid.template.location = 0;
    //         categoryAxis.renderer.minGridDistance = 30;
    //         categoryAxis.renderer.labels.template.rotation =-90;
    //         categoryAxis.renderer.labels.template.horizontalCenter = "right";
    //         categoryAxis.renderer.labels.template.verticalCenter = "middle";
    //         categoryAxis.renderer.labels.template.fill = am4core.color("#ffffff"); // Set label color to black

    //         var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
    //         valueAxis.renderer.labels.template.fill = am4core.color("#ffffff"); // Set label color to black

    //         // Create series
    //         var series = chart.series.push(new am4charts.LineSeries());
    //         series.dataFields.valueY = "KWH";
    //         series.dataFields.categoryX = "week";
    //         series.name = "KWH";
    //         series.tooltipText = "{categoryX}: [bold]{valueY}[/]";

    //         // Add scrollbar
    //         // chart.scrollbarX = new am4core.Scrollbar();

    //         // Add cursor
    //         chart.cursor = new am4charts.XYCursor();
    //     });
    //   });

    //******* Meter Status count start *******//
    // 
    socket.on('meterCounts', function (data) {
      console.log("meterCounts", data);
      document.getElementById('activeMeterCount').textContent = "Active Meters: " + data.tempact;
      document.getElementById('inactiveMeterCount').textContent = "Inactive Meters: " + data.inactiveMeterCount;
    });
    //******** Meter Status count end ********//


    //////////// Transformer chart end ////////////////////
    socket.on("send_transformer_data_Chart", function (transformer_arr) {
      console.log("send_transformer_data_Chart:::::", transformer_arr);
      var Trans_arr = [];

      // Process each data item received from the backend
      transformer_arr.forEach(function (data) {
        Trans_arr.push({
          week: getDayName(data.day_of_week),
          KWH: data.total_kWh
        });
      });

      am4core.ready(function () {
        // Themes begin
        am4core.useTheme(am4themes_animated);
        // Themes end

        // Create chart instance
        var chart = am4core.create("channel_KWH22", am4charts.XYChart);

        chart.data = Trans_arr;

        // Create axes
        var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
        categoryAxis.dataFields.category = "week";
        categoryAxis.renderer.grid.template.location = 0;
        categoryAxis.renderer.minGridDistance = 30;
        categoryAxis.renderer.labels.template.rotation = -90;
        categoryAxis.renderer.labels.template.horizontalCenter = "right";
        categoryAxis.renderer.labels.template.verticalCenter = "middle";
        categoryAxis.renderer.labels.template.fill = am4core.color("#ffffff"); // Set label color to black

        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
        valueAxis.renderer.labels.template.fill = am4core.color("#ffffff"); // Set label color to black

        // Create series
        var series = chart.series.push(new am4charts.LineSeries());
        series.dataFields.valueY = "KWH";
        series.dataFields.categoryX = "week";
        series.name = "KWH";
        series.tooltipText = "{categoryX}: [bold]{valueY}[/]";

        // Add cursor
        chart.cursor = new am4charts.XYCursor();
      });
    });

    // Function to get day name based on day of the week
    function getDayName(dayOfWeek) {
      const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      return dayNames[dayOfWeek - 1];
    }




    ///////////// Generator chart strt/////////////////////
    socket.emit('get_generator_data_Chart', 'get_generator_data_Chart');

    socket.on("send_generator_data_Chart", function (generator_arr) {
      console.log("send_generator_data_Chart:::::", generator_arr);
      var GEN_arr = [];

      // Process each data item received from the backend
      generator_arr.forEach(function (data) {
        GEN_arr.push({
          week: getDayNameGEN(data.day_of_week), // Get day name dynamically
          KWH: data.total_kWh
        });
      });

      am4core.ready(function () {
        // Themes begin
        am4core.useTheme(am4themes_animated);
        // Themes end

        // Create chart instance
        var chart = am4core.create("channel_KWH33", am4charts.XYChart);

        chart.data = GEN_arr;

        // Create axes
        var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
        categoryAxis.dataFields.category = "week";
        categoryAxis.renderer.grid.template.location = 0;
        categoryAxis.renderer.minGridDistance = 30;
        categoryAxis.renderer.labels.template.rotation = -90;
        categoryAxis.renderer.labels.template.horizontalCenter = "right";
        categoryAxis.renderer.labels.template.verticalCenter = "middle";
        categoryAxis.renderer.labels.template.fill = am4core.color("#ffffff"); // Set label color to black

        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
        valueAxis.renderer.labels.template.fill = am4core.color("#ffffff"); // Set label color to black

        // Create series
        var series = chart.series.push(new am4charts.LineSeries());
        series.dataFields.valueY = "KWH";
        series.dataFields.categoryX = "week";
        series.name = "KWH";
        series.tooltipText = "{categoryX}: [bold]{valueY}[/]";

        // Add cursor
        chart.cursor = new am4charts.XYCursor();
      });
    });

    // Function to get day name based on day of the week
    function getDayNameGEN(dayOfWeek) {
      const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      return dayNames[dayOfWeek - 1]; // Adjust for 0-based index
    }

    ///////////// Generator chart end /////////////////////




    ////////////////////////////////// transformer consumption strt //////////////////////////////////

    //******* get Live consumption count start *******//
    function updateTransformerLiveData() {
      fetch('/live_trasnformer_consumption_endpoint')
        .then(response => response.json())
        .then(data => {
          let loadValue = 0; // Default value is 0
          if (data && data.length > 0 && data[0].KWH !== null && data[0].KWH !== undefined) {
            loadValue = data[0].KWH;
          }
          document.getElementById('live_value').innerHTML = '<strong>' + loadValue + '</strong> KWH';
          console.log("hhhhhhh", loadValue);
        })
        .catch(error => {
          console.error('Error fetching live data:', error);
        });
    }

    updateTransformerLiveData();
    setInterval(updateTransformerLiveData, 900000);
    //******* get Live consumption count end *******//

    //******* get yesterday consumption count start *******//
    function updateTransformerYestData() {
      fetch('/yesterday_trasnformer_consumption_endpoint')
        .then(response => response.json())
        .then(data => {
          let loadValue = 0; // Default value is 0
          if (data && data.length > 0 && data[0].KWH !== null && data[0].KWH !== undefined) {
            loadValue = data[0].KWH;
          }
          document.getElementById('yesterday_value').innerHTML = '<strong>' + loadValue + '</strong> KWH';
          console.log("yyyyyyyyy", loadValue);
        })
        .catch(error => {
          console.error('Error fetching live data:', error);
        });
    }

    updateTransformerYestData();
    setInterval(updateTransformerYestData, 900000);
    //******* get yesterday consumption count end *******//


    //****** get monthly consumption count start ******//
    function updateTransformerMonthData() {
      fetch('/monthly_trasnformer_consumption_endpoint')
        .then(response => response.json())
        .then(data => {
          let loadValue = 0; // Default value is 0
          if (data && data.length > 0 && data[0].KWH !== null && data[0].KWH !== undefined) {
            loadValue = data[0].KWH;
          }
          document.getElementById('month_value').innerHTML = '<strong>' + loadValue + '</strong> KWH';
          console.log("monthly_consumptionnnn::::", loadValue);
        })
        .catch(error => {
          console.error('Error fetching live data:', error);
        });
    }

    updateTransformerMonthData();
    setInterval(updateTransformerMonthData, 900000);
    //******* get monthly consumption count end *******//


    ////////////////////////// Generator consumption strt ////////////////////////////////////////////

    //******* get Live consumption count start *******//

    function updateGeneratorLiveData() {
      fetch('/live_Generator_consumption_endpoint')
        .then(response => response.json())
        .then(data => {
          let loadValue = 0; // Default value is 0
          if (data && data.length > 0 && data[0].KWH !== null && data[0].KWH !== undefined) {
            loadValue = data[0].KWH;
          }
          document.getElementById('GENlive_value').innerHTML = '<strong>' + loadValue + '</strong> KWH';
          console.log("live_Generator_consumption_endpoint", loadValue);
        })
        .catch(error => {
          console.error('Error fetching live data:', error);
        });
    }

    updateGeneratorLiveData();
    setInterval(updateGeneratorLiveData, 900000);
    //******* get Live consumption count end *******//

    //******* get yesterday consumption count start *******//
    function updateGeneratorYestData() {
      fetch('/yesterday_Generator_consumption_endpoint')
        .then(response => response.json())
        .then(data => {
          let loadValue = 0; // Default value is 0
          if (data && data.length > 0 && data[0].KWH !== null && data[0].KWH !== undefined) {
            loadValue = data[0].KWH;
          }
          document.getElementById('GENyesterday_value').innerHTML = '<strong>' + loadValue + '</strong> KWH';
          console.log("yyyyyyyyy", loadValue);
        })
        .catch(error => {
          console.error('Error fetching live data:', error);
        });
    }

    updateGeneratorYestData();
    setInterval(updateGeneratorYestData, 900000);
    //******* get yesterday consumption count end *******//


    //****** get monthly consumption count start ******//
    function updateGeneratorMonthData() {
      fetch('/monthly_Generator_consumption_endpoint')
        .then(response => response.json())
        .then(data => {
          let loadValue = 0; // Default value is 0
          if (data && data.length > 0 && data[0].KWH !== null && data[0].KWH !== undefined) {
            loadValue = data[0].KWH;
          }
          document.getElementById('GENmonth_value').innerHTML = '<strong>' + loadValue + '</strong> KWH';
          console.log("monthly_consumptionnnn::::", loadValue);
        })
        .catch(error => {
          console.error('Error fetching live data:', error);
        });
    }

    updateGeneratorMonthData();
    setInterval(updateGeneratorMonthData, 900000);
    //******* get monthly consumption count end *******//

    ////////////////////////// Generator consumption end ////////////////////////////////////////////



  </script>
</body>

</html>