<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EMS</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="assets/plugins/fontawesome-free/css/all.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="assets/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="assets/dist/css/adminlte.min.css">
  <link rel="stylesheet" href="assets/plugins/select2/css/select2.min.css">
  <link rel="stylesheet" href="assets/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
  <!-- <link rel="stylesheet" href="assets/plugins/fontawesome-free/css/all.min.css"> -->
</head>

<!-- dropdown style strt -->
<style>
  .toggle-next {
    border-radius: 0;
  }

  label {
    cursor: pointer;
  }

  .ellipsis {
    text-overflow: ellipsis;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
  }

  .apply-selection {
    display: none;
    width: 100%;
    margin: 0;
    padding: 5px 10px;
    border-bottom: 1px solid #ccc;
  }

  .ajax-link {
    display: none;
  }

  .checkboxes {
    margin: 0;
    display: none;
    border: 1px solid #ccc;
    border-top: 0;
  }

  .inner-wrap {
    padding: 5px 10px;
    max-height: 140px;
    overflow: auto;
  }

  button {
    font-size: 18px;
    display: inline-block;
    outline: 0;
    border: 0;
    cursor: pointer;
    will-change: box-shadow,transform;
    /* background: radial-gradient( 100% 100% at 100% 0%, #737d80 0%, #111111 100% ); */
    /* background-color: #008080; */
    /* background-color: #556b2f; */
    background-color: #3498db;
    box-shadow: 0px 0.01em 0.01em rgb(45 35 66 / 40%), 0px 0.3em 0.7em -0.01em rgb(45 35 66 / 30%), inset 0px -0.01em 0px rgb(58 65 111 / 50%);
    padding: 0 2em;
    border-radius: 0.3em;
    color: #fff;
    height: 2.6em;
    text-shadow: 0 1px 0 rgb(0 0 0 / 40%);
    transition: box-shadow 0.15s ease, transform 0.15s ease;
  }

  button:hover {
    box-shadow: 0px 0.1em 0.2em rgb(45 35 66 / 40%), 0px 0.4em 0.7em -0.1em rgb(45 35 66 / 30%), inset 0px -0.1em 0px #3c4fe0;
    transform: translateY(-0.1em);
  }

  button:active {
    box-shadow: inset 0px 0.1em 0.6em #3c4fe0;
    transform: translateY(0em);
  }
</style>
<!-- dropdown style end -->

<style>
  #lineChart11 {
    width: 100%;
    height: 500px;
  }

  #lineChart22 {
    width: 100%;
    height: 500px;
  }

  #lineChart33 {
    width: 100%;
    height: 500px;
  }

  #lineChart44 {
    width: 100%;
    height: 500px;
  }

  #chartdiv {
    width: 100%;
    height: 500px;
  }

  .chart-container {
      /* display: none; */
      width: 100%;
  }
  body.sidebar-minimized .content-wrapper,
  body.sidebar-collapse .content-wrapper {
      margin-left: 0;
  }

  .sidebar {
      display: none;
  }

  .navbar-toggler {
      display: none;
  }


</style>

<body class="hold-transition dark-mode sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed">
  
  <div class="wrapper">

    <!-- Preloader -->
    <div class="preloader flex-column justify-content-center align-items-center">
      <img class="animation__wobble" src="" alt="" height="60" width="60">
    </div>

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-dark" style="margin-left: 0;">
      <!-- Left navbar links -->
      <ul class="navbar-nav" >
        <li class="nav-item">
          <!-- <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a> -->
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="general.html" class="nav-link">Home</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="index.html" class="nav-link">Monitor view</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="overview.html" class="nav-link">Overview</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="livemeter.html" class="nav-link">Meter Status</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="report.html" class="nav-link">Reports</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="mailindex.html" class="nav-link">Mail</a>
        </li>
      </ul>

      <!-- Right navbar links -->
      <ul class="navbar-nav ml-auto">
       
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="refreshPage()" role="button">
            <i class="fas fa-sync-alt"></i> Refresh
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="fullscreen" href="#" role="button">
            <i class="fas fa-expand-arrows-alt"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
            <i class="fas fa-th-large"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
            <img src="images/Aquapharm.jpg" alt="" class="" style="height: 50px; width: 50px; margin-top: -20px;">
          </a>
        </li>
      </ul>

    </nav>
    <!-- /.navbar -->

    <!-- Content Wrapper. Contains page content -->
    <!-- <div class="content-wrapper">  -->
      <div class="content-wrapper" style="margin-left: 20px;">
        <div class="container">
          <div class="row mx-auto">
            <!-- <div class="col-lg-2 col-4"> -->
            <div class="col-md-3">
              <div class="form-group" style="margin-left: 60px;">
                <label>METER</label>
                <div class="select2-purple">
                  <select class="select2" id="meter_name" multiple="multiple" data-placeholder="Select Meter" data-dropdown-css-class="select2-purple" style="width: 100%;">                  
                  </select>
                </div>
              </div>
            </div>
            <!-- <div class="col-lg-2 col-4"> -->
            <div class="col-md-3">
            <div class="form-group" style="margin-left: 60px;">
              <label>Load Name</label>
              <div class="select2-purple">
                <select class="select2" multiple="multiple" id="load_name"  data-placeholder="Select Load" data-dropdown-css-class="select2-purple" style="width: 100%;">
                  <!-- <select id="load_name" multiple="multiple" data-placeholder="Select Load" data-dropdown-css-class="select2-purple" style="width: 100%;"> -->
                </select>                
              </div>
            </div>            
            </div>
            <div class="col-md-2"></div>
            <div class="col-md-3" style="margin-top: 20px;">
              <button onclick="filterCharts()" class="btn btn-primary mt-2" style="width: 50%;">Filter</button>    
            </div>
          </div>
        </div>

<!-- ////////////////////////////////// charts strt ////////////////////////////////////////////////////////// -->
    
<!-- 
      <div class="row">
        <div class="col-lg-6 col-12 chart-container" id="process_mcc1">
   
            <div id="container1"></div>
            <select id="select1">
                <option value="all" id="selectlegend1">All</option>
            </select>
        </div>
    
        <div class="col-lg-6 col-12 chart-container" id="process_mcc2">
            <div id="container2"></div>
        </div>
    </div>
    
      <div class="row">
        <div class="col-lg-6 col-12 chart-container" id="process_mcc3">
          <div id="container3"></div>
        </div>
    
        <div class="col-lg-6 col-12 chart-container" id="process_mcc4">
          <div id="container4"></div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-6 col-12 chart-container" id="process_mcc5">
          <div id="container5"></div>
        </div>
    
        <div class="col-lg-6 col-12 chart-container" id="process_mcc6">
          <div id="container6"></div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-6 col-12 chart-container" id="process_mcc7">
          <div id="container7"></div>
        </div>
    
        <div class="col-lg-6 col-12 chart-container" id="process_mcc8">
          <div id="container8"></div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-6 col-12 chart-container" id="process_mcc9">
          <div id="container9"></div>
        </div>
    
        <div class="col-lg-6 col-12 chart-container" id="capacitor_bank1">
          <div id="container10"></div>
        </div>
      </div>
      
      <div class="row">

        <div class="col-lg-6 col-12 chart-container" id="capacitor_bank2">
          <div id="container11"></div>
        </div>
    
        <div class="col-lg-6 col-12 chart-container" id="capacitor_bank3">
          <div id="container12"></div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-6 col-12 chart-container" id="fire_hydrant_mcc">
          <div id="container13"></div>
        </div>
    
        <div class="col-lg-6 col-12 chart-container" id="lighting_master_pdb">
          <div id="container14"></div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-6 col-12 chart-container" id="etp_mcc">
          <div id="container15"></div>
        </div>
    
        <div class="col-lg-6 col-12 chart-container" id="electrical_chiller1">
          <div id="container16"></div>
        </div>
      </div>
   
        <div class="col-lg-6 col-12 chart-container" id="electrical_chiller2">
          <div id="container17"></div>
        </div> -->
    
        <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="process_mcc1">
              <div id="container1"></div>
              <select id="select1">
                  <option value="all" id="selectlegend1">All</option>
              </select>
          </div>
      
          <div class="col-lg-6 col-12 chart-container" id="process_mcc2">
              <div id="container2"></div>
              <select id="select2">
                  <option value="all" id="selectlegend2">All</option>
              </select>
          </div>
      </div>
      
      <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="process_mcc3">
              <div id="container3"></div>
              <select id="select3">
                  <option value="all" id="selectlegend3">All</option>
              </select>
          </div>
      
          <div class="col-lg-6 col-12 chart-container" id="process_mcc4">
              <div id="container4"></div>
              <select id="select4">
                  <option value="all" id="selectlegend4">All</option>
              </select>
          </div>
      </div>
      
      <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="process_mcc5">
              <div id="container5"></div>
              <select id="select5">
                  <option value="all" id="selectlegend5">All</option>
              </select>
          </div>
      
          <div class="col-lg-6 col-12 chart-container" id="process_mcc6">
              <div id="container6"></div>
              <select id="select6">
                  <option value="all" id="selectlegend6">All</option>
              </select>
          </div>
      </div>
      
      <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="process_mcc7">
              <div id="container7"></div>
              <select id="select7">
                  <option value="all" id="selectlegend7">All</option>
              </select>
          </div>
      
          <div class="col-lg-6 col-12 chart-container" id="process_mcc8">
              <div id="container8"></div>
              <select id="select8">
                  <option value="all" id="selectlegend8">All</option>
              </select>
          </div>
      </div>
      
      <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="process_mcc9">
              <div id="container9"></div>
              <select id="select9">
                  <option value="all" id="selectlegend9">All</option>
              </select>
          </div>
      
          <div class="col-lg-6 col-12 chart-container" id="capacitor_bank1">
              <div id="container10"></div>
              <select id="select10">
                  <option value="all" id="selectlegend10">All</option>
              </select>
          </div>
      </div>
      
      <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="capacitor_bank2">
              <div id="container11"></div>
              <select id="select11">
                  <option value="all" id="selectlegend11">All</option>
              </select>
          </div>
      
          <div class="col-lg-6 col-12 chart-container" id="capacitor_bank3">
              <div id="container12"></div>
              <select id="select12">
                  <option value="all" id="selectlegend12">All</option>
              </select>
          </div>
      </div>
      
      <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="fire_hydrant_mcc">
              <div id="container13"></div>
              <select id="select13">
                  <option value="all" id="selectlegend13">All</option>
              </select>
          </div>
      
          <div class="col-lg-6 col-12 chart-container" id="lighting_master_pdb">
              <div id="container14"></div>
              <select id="select14">
                  <option value="all" id="selectlegend14">All</option>
              </select>
          </div>
      </div>
      
      <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="etp_mcc">
              <div id="container15"></div>
              <select id="select15">
                  <option value="all" id="selectlegend15">All</option>
              </select>
          </div>
      
          <div class="col-lg-6 col-12 chart-container" id="electrical_chiller1">
              <div id="container16"></div>
              <select id="select16">
                  <option value="all" id="selectlegend16">All</option>
              </select>
          </div>
      </div>
      
      <div class="row">
          <div class="col-lg-6 col-12 chart-container" id="electrical_chiller2">
              <div id="container17"></div>
              <select id="select17">
                  <option value="all" id="selectlegend17">All</option>
              </select>
          </div>
      </div>
       
      
    
<!-- /////////////////////////////////// chart end ////////////////////////////////////////////////////////////-->
        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
        </aside>
        <!-- /.control-sidebar -->

        <!-- Main Footer -->
        <!-- <footer class="main-footer">
        <strong>Copyright &copy; 2024-2025 <a href="">Orbittal</a>.</strong>
        All rights reserved.
        <div class="float-right d-none d-sm-inline-block">
          <b>Version</b> 3.2.0
        </div>
      </footer> -->

    </div>
  </div>
  <!-- ./wrapper -->

  <!-- REQUIRED SCRIPTS -->
  <!-- JQuery min js -->
  <script src="assets/plugins/jquery/jquery.min.js"></script>
  <!-- Bootstrap -->
  <script src="assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- overlayScrollbars -->
  <script src="assets/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
  <!-- AdminLTE App -->
  <script src="assets/dist/js/adminlte.js"></script>
  <script src="assets/plugins/select2/js/select2.full.min.js"></script>
  <!-- jQuery Mapael -->
  <script src="assets/plugins/jquery-mousewheel/jquery.mousewheel.js"></script>
  <script src="assets/plugins/raphael/raphael.min.js"></script>
  <script src="assets/plugins/jquery-mapael/jquery.mapael.min.js"></script>
  <script src="assets/plugins/jquery-mapael/maps/usa_states.min.js"></script>
  <!-- ChartJS -->
  <script src="assets/plugins/chart.js/Chart.min.js"></script>
  <script src="assets/js/core.js"></script>
  <script src="assets/js/charts.js"></script>
  <script src="assets/js/animated.js"></script>

  <!-- AdminLTE for demo purposes -->
  <script src="assets/dist/js/demo.js"></script>
  <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
  <script src="assets/dist/js/pages/dashboard2.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
  <script src="assets/js/chart.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript"></script>
  <script src="assets/js/highcharts.js"></script>
  <script src="assets/js/data.js"></script>
  <script src="assets/js/exporting.js"></script>
  <script src="assets/js/export-data.js"></script>
  <script src="assets/js/accessibility.js"></script>

<script>

  var socket = io();

  $(function () {
      //Initialize Select2 Elements
      $('.select2').select2()

      //Initialize Select2 Elements
      $('.select2bs4').select2({
        theme: 'bootstrap4'
      })
    });


   ///// get meter name dropdowm strt ///////
   socket.emit('getMeter_Namelist', 'getProcess_Namelist');
   
   socket.on('sendMeter_namelist', function (meterArr) {
     //console.log("meter_namelist::::", meterArr)
       $('#meter_name').empty();
       $('#meter_name').append(`<option>Select Meter</option>`)
       
       for (var i = 0; i < meterArr.length; i++) {
           $('#meter_name').append(`<option>${meterArr[i]}</option>`)
       }
      
   });
   ///// get meter name dropdown end ////////


   ///// get load name dropdown strt //////
   socket.emit('getLoad_Namelist', 'getProcess_Namelist');
   
   socket.on('sendLoad_namelist', function (loadArr) {
     //console.log("meter_namelist::::", loadArr)
       $('#load_name').empty();
       $('#load_name').append(`<option>Select Load</option>`)
       
       for (var i = 0; i < loadArr.length; i++) {
           $('#load_name').append(`<option>${loadArr[i]}</option>`)
       }
      
   });
   ///// get load name dropdown end ///////

   function filterCharts() {
    // Hide all chart containers initially
    $('.chart-container').hide();
   
    var selectedLoads = $('#load_name').val();

    // If no loads are selected, show all charts
    if (!selectedLoads || selectedLoads.length === 0) {
        return;
    }

    // Show chart containers corresponding to selected load names
    for (var i = 0; i < selectedLoads.length; i++) {
        var loadName = selectedLoads[i];
        $('#' + loadName).show(); // Show the chart container with ID equal to load name
    }
}



// card 1 
   ///////////////////// process_mcc1 graph strt ////////////////////////////////
   document.addEventListener('DOMContentLoaded', function () {
  const select1 = document.getElementById('select1');
  const chart1 = Highcharts.chart('container1', {
    xAxis: {
      categories: []
    },
    series: [{
      name: 'Voltage',
      id: 'Voltage',
      data: [], // Initial empty data
      color: Highcharts.getOptions().colors[0]
    }, {
      name: 'Current',
      id: 'Current',
      data: [], 
      color: Highcharts.getOptions().colors[1]
    }, {
      name: 'Power Factor',
      id: 'PowerFactor',
      data: [], 
      color: Highcharts.getOptions().colors[2]
    }, {
      name: 'Frequency',
      id: 'Frequency',
      data: [], 
      color: Highcharts.getOptions().colors[3]
    }, {
      name: 'KWH',
      id: 'KWH',
      data: [], 
      color: Highcharts.getOptions().colors[4]
    },{
      name: 'KVAH',
      id: 'KVAH',
      data: [], 
      color: Highcharts.getOptions().colors[5]
    }],
  });

  var legendNames = chart1.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select1.add(option);
  });

  select1.addEventListener('change', function (e) {
    chart1.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_process_mcc1', 'trend_Chart_process_mcc1');

  socket.on("send_trend_Chart_process_mcc1", function (trend_dataArr) {
    var Voltage_data = [];
    var Current_data = [];
    var PowerFactor_data = [];
    var Frequency_data = [];
    var KWH_data = [];
    var KVAH_data = [];
    var categories = [];

    for (var i = 0; i < trend_dataArr.length; i += 7) {
      var Voltage = trend_dataArr[i];
      var Current = trend_dataArr[i + 1];
      var PowerFactor = trend_dataArr[i + 2];
      var Frequency = trend_dataArr[i + 3];
      var KWH = trend_dataArr[i + 4];
      var KVAH = trend_dataArr[i + 5];
      var date_time = trend_dataArr[i + 6];

      var parts = date_time.split(" ");
      var timePart = parts[1];
      var timeParts = timePart.split(":");
      var hours = parseInt(timeParts[0]);
      var minutes = parseInt(timeParts[1]);

      var formattedTime = hours + ':' + minutes + ' hr';
      categories.push(formattedTime);

      Voltage_data.push(parseFloat(Voltage));
      Current_data.push(parseFloat(Current));
      PowerFactor_data.push(parseFloat(PowerFactor));
      Frequency_data.push(parseFloat(Frequency));
      KWH_data.push(parseFloat(KWH));
      KVAH_data.push(parseFloat(KVAH));
    }

    chart1.xAxis[0].update({
      categories: categories
    });

    chart1.series[0].setData(Voltage_data, true);
    chart1.series[1].setData(Current_data, true);
    chart1.series[2].setData(PowerFactor_data, true);
    chart1.series[3].setData(Frequency_data, true);
    chart1.series[4].setData(KWH_data, true);
    chart1.series[5].setData(KVAH_data, true);
  });
});


   //////////////////// process_mcc1 graph end ///////////////////////////////// 


// card 2
  ////////////////////// process_mcc2 graph strt ///////////////////////////////
   document.addEventListener('DOMContentLoaded', function () {
    const select2 = document.getElementById('select2');
    const chart2 = Highcharts.chart('container2', {
      xAxis: {
        categories: [] 
      },
      series: [{
        name: 'Voltage',
        id: 'Voltage',
        data: [], // Initial empty data
        color: Highcharts.getOptions().colors[0]
      }, {
        name: 'Current',
        id: 'Current',
        data: [], 
        color: Highcharts.getOptions().colors[1]
      }, {
        name: 'Power Factor',
        id: 'PowerFactor',
        data: [], 
        color: Highcharts.getOptions().colors[2]
      }, {
          name: 'Frequency',
          id: 'Frequency',
          data: [], 
          color: Highcharts.getOptions().colors[3]
        }, {
          name: 'KWH',
          id: 'KWH',
          data: [], 
          color: Highcharts.getOptions().colors[4]
        },{
          name: 'KVAH',
          id: 'KVAH',
          data: [], 
          color: Highcharts.getOptions().colors[5]
        }],
   });

 var legendNames = chart2.series.map(series => series.name);

 // Populate the dropdown with legend names
 legendNames.forEach(name => {
   var option = document.createElement('option');
   option.text = name;
   option.value = name;
   select2.add(option);
 });

 select2.addEventListener('change', function (e) {
   //console.log("Dropdown Selection Changed:", e.target.value);

   chart2.series.forEach(series => {
     if (e.target.value === 'all' || series.name === e.target.value) {
       series.show();
     } else {
       series.hide();
     }
   });
 });

 socket.emit('trend_Chart_process_mcc2', 'trend_Chart_process_mcc2');

 socket.on("send_trend_Chart_process_mcc2", function (trend_dataArr) {
   //console.log("send_trend_Chart_process_mcc2:::::", trend_dataArr);

    var Voltage_data = [];
    var Current_data = [];
    var PowerFactor_data = [];
    var Frequency_data = [];
    var KWH_data = [];
    var KVAH_data = [];
    var categories = [];


    for (var i = 0; i < trend_dataArr.length; i += 7) {
        var Voltage = trend_dataArr[i];
        var Current = trend_dataArr[i + 1];
        var PowerFactor = trend_dataArr[i + 2];
        var Frequency = trend_dataArr[i + 3];
        var KWH = trend_dataArr[i + 4];
        var KVAH = trend_dataArr[i + 5];
        var date_time = trend_dataArr[i + 6];

        console.log("date_time:::::", date_time);
        var date_time = date_time.toString();
        if (date_time !== undefined) {
          var parts = date_time.split(" ");

// Get the time part
var timePart = parts[1];
console.log('parts',parts)
// Split the time part into hours, minutes, and seconds
var timeParts = timePart.split(":");
console.log('timeParts',timeParts)
// Extract hours, minutes, and seconds
var hours = parseInt(timeParts[0]);
var minutes = parseInt(timeParts[1]);
var seconds = parseInt(timeParts[2]);

          var formattedTime =  hours + ':' + minutes  + ' hr';
          //console.log("formattedTime:::::", formattedTime);
          categories.push(formattedTime);

          Voltage_data.push(parseFloat(Voltage));
          Current_data.push(parseFloat(Current));
          PowerFactor_data.push(parseFloat(PowerFactor));
          Frequency_data.push(parseFloat(Frequency));
          KWH_data.push(parseFloat(KWH));
          KVAH_data.push(parseFloat(KVAH));

        }
      }

   chart2.xAxis[0].update({
     categories: categories
   });

    chart2.series[0].setData(Voltage_data, true);
    chart2.series[1].setData(Current_data, true);
    chart2.series[2].setData(PowerFactor_data, true);
    chart2.series[2].setData(PowerFactor_data, true);
    chart2.series[3].setData(Frequency_data, true);
    chart2.series[4].setData(KWH_data, true);
    chart2.series[5].setData(KVAH_data, true);

 });
});

  
// card 3
  /////////////////////// process_mcc3 graph strt /////////////////////////////
    document.addEventListener('DOMContentLoaded', function () {
    const select3 = document.getElementById('select3');
    const chart3 = Highcharts.chart('container3', {
      xAxis: {
        categories: [] // Initially empty, will be populated dynamically
      },
      series: [{
        name: 'Voltage',
        id: 'Voltage',
        data: [], // Initial empty data
        color: Highcharts.getOptions().colors[0]
      }, {
        name: 'Current',
        id: 'Current',
        data: [], 
        color: Highcharts.getOptions().colors[1]
      }, {
        name: 'Power Factor',
        id: 'PowerFactor',
        data: [], 
        color: Highcharts.getOptions().colors[2]
      }, {
          name: 'Frequency',
          id: 'Frequency',
          data: [], 
          color: Highcharts.getOptions().colors[3]
        }, {
          name: 'KWH',
          id: 'KWH',
          data: [], 
          color: Highcharts.getOptions().colors[4]
        },{
          name: 'KVAH',
          id: 'KVAH',
          data: [], 
          color: Highcharts.getOptions().colors[5]
        }],
   });

 var legendNames = chart3.series.map(series => series.name);

 // Populate the dropdown with legend names
 legendNames.forEach(name => {
   var option = document.createElement('option');
   option.text = name;
   option.value = name;
   select3.add(option);
 });

 select3.addEventListener('change', function (e) {
   //console.log("Dropdown Selection Changed:", e.target.value);

   chart3.series.forEach(series => {
     if (e.target.value === 'all' || series.name === e.target.value) {
       series.show();
     } else {
       series.hide();
     }
   });
 });

 socket.emit('trend_Chart_process_mcc3', 'trend_Chart_process_mcc3');

 socket.on("send_trend_Chart_process_mcc3", function (trend_dataArr) {
   //console.log("send_trend_Chart_process_mcc3:::::", trend_dataArr);

    var Voltage_data = [];
    var Current_data = [];
    var PowerFactor_data = [];
    var Frequency_data = [];
    var KWH_data = [];
    var KVAH_data = [];
    var categories = [];


    for (var i = 0; i < trend_dataArr.length; i += 7) {
        var Voltage = trend_dataArr[i];
        var Current = trend_dataArr[i + 1];
        var PowerFactor = trend_dataArr[i + 2];
        var Frequency = trend_dataArr[i + 3];
        var KWH = trend_dataArr[i + 4];
        var KVAH = trend_dataArr[i + 5];
        var date_time = trend_dataArr[i + 6];

        console.log("date_time:::::", date_time);
        var date_time = date_time.toString();
        if (date_time !== undefined) {
          var parts = date_time.split(" ");

// Get the time part
var timePart = parts[1];
console.log('parts',parts)
// Split the time part into hours, minutes, and seconds
var timeParts = timePart.split(":");
console.log('timeParts',timeParts)
// Extract hours, minutes, and seconds
var hours = parseInt(timeParts[0]);
var minutes = parseInt(timeParts[1]);
var seconds = parseInt(timeParts[2]);

          var formattedTime =  hours + ':' + minutes + ' hr';
          //console.log("formattedTime:::::", formattedTime);
          categories.push(formattedTime);

          Voltage_data.push(parseFloat(Voltage));
          Current_data.push(parseFloat(Current));
          PowerFactor_data.push(parseFloat(PowerFactor));
          Frequency_data.push(parseFloat(Frequency));
          KWH_data.push(parseFloat(KWH));
          KVAH_data.push(parseFloat(KVAH));

        }
      }

   chart3.xAxis[0].update({
     categories: categories
   });

    chart3.series[0].setData(Voltage_data, true);
    chart3.series[1].setData(Current_data, true);
    chart3.series[2].setData(PowerFactor_data, true);
    chart3.series[2].setData(PowerFactor_data, true);
    chart3.series[3].setData(Frequency_data, true);
    chart3.series[4].setData(KWH_data, true);
    chart3.series[5].setData(KVAH_data, true);

 });
});

  
// card 4
  ////////////////////////process_mcc4 graph strt ///////////////////////////////////////
    document.addEventListener('DOMContentLoaded', function () {
      const select4 = document.getElementById('select4');
      const chart4 = Highcharts.chart('container4', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart4.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select4.add(option);
  });

  select4.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart4.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_process_mcc4', 'trend_Chart_process_mcc4');

  socket.on("send_trend_Chart_process_mcc4", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart4.xAxis[0].update({
      categories: categories
    });

      chart4.series[0].setData(Voltage_data, true);
      chart4.series[1].setData(Current_data, true);
      chart4.series[2].setData(PowerFactor_data, true);
      chart4.series[2].setData(PowerFactor_data, true);
      chart4.series[3].setData(Frequency_data, true);
      chart4.series[4].setData(KWH_data, true);
      chart4.series[5].setData(KVAH_data, true);

  });
  });


// card 5
  ////////////////////////process_mcc5 graph strt ///////////////////////////////////////
    document.addEventListener('DOMContentLoaded', function () {
      const select5 = document.getElementById('select5');
      const chart5 = Highcharts.chart('container55', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart5.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select5.add(option);
  });

  select5.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart5.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_process_mcc5', 'trend_Chart_process_mcc5');

  socket.on("send_trend_Chart_process_mcc5", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart5.xAxis[0].update({
      categories: categories
    });

      chart5.series[0].setData(Voltage_data, true);
      chart5.series[1].setData(Current_data, true);
      chart5.series[2].setData(PowerFactor_data, true);
      chart5.series[2].setData(PowerFactor_data, true);
      chart5.series[3].setData(Frequency_data, true);
      chart5.series[4].setData(KWH_data, true);
      chart5.series[5].setData(KVAH_data, true);

  });
  });

    
// card 6
  ////////////////////////process_mcc6 graph strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select6 = document.getElementById('select6');
      const chart6 = Highcharts.chart('container6', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart6.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select6.add(option);
  });

  select6.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart6.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_process_mcc6', 'trend_Chart_process_mcc6');

  socket.on("send_trend_Chart_process_mcc6", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart6.xAxis[0].update({
      categories: categories
    });

      chart6.series[0].setData(Voltage_data, true);
      chart6.series[1].setData(Current_data, true);
      chart6.series[2].setData(PowerFactor_data, true);
      chart6.series[2].setData(PowerFactor_data, true);
      chart6.series[3].setData(Frequency_data, true);
      chart6.series[4].setData(KWH_data, true);
      chart6.series[5].setData(KVAH_data, true);

  });
  });


// card 7
  ////////////////////////process_mcc7 graph strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select7 = document.getElementById('select7');
      const chart7 = Highcharts.chart('container7', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart7.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select7.add(option);
  });

  select7.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart7.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_process_mcc7', 'trend_Chart_process_mcc7');

  socket.on("send_trend_Chart_process_mcc7", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart7.xAxis[0].update({
      categories: categories
    });

      chart7.series[0].setData(Voltage_data, true);
      chart7.series[1].setData(Current_data, true);
      chart7.series[2].setData(PowerFactor_data, true);
      chart7.series[2].setData(PowerFactor_data, true);
      chart7.series[3].setData(Frequency_data, true);
      chart7.series[4].setData(KWH_data, true);
      chart7.series[5].setData(KVAH_data, true);

  });
  });


// card 8
  ////////////////////////process_mcc8 graph strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select8 = document.getElementById('select8');
      const chart8 = Highcharts.chart('container8', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart8.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select8.add(option);
  });

  select8.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart8.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_process_mcc8', 'trend_Chart_process_mcc8');

  socket.on("send_trend_Chart_process_mcc8", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart8.xAxis[0].update({
      categories: categories
    });

      chart8.series[0].setData(Voltage_data, true);
      chart8.series[1].setData(Current_data, true);
      chart8.series[2].setData(PowerFactor_data, true);
      chart8.series[2].setData(PowerFactor_data, true);
      chart8.series[3].setData(Frequency_data, true);
      chart8.series[4].setData(KWH_data, true);
      chart8.series[5].setData(KVAH_data, true);

  });
  });


// card 9
  ////////////////////////process_mcc9 graph strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select9 = document.getElementById('select9');
      const chart9 = Highcharts.chart('container9', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart9.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select9.add(option);
  });

  select9.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart9.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_process_mcc9', 'trend_Chart_process_mcc9');

  socket.on("send_trend_Chart_process_mcc9", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart9.xAxis[0].update({
      categories: categories
    });

      chart9.series[0].setData(Voltage_data, true);
      chart9.series[1].setData(Current_data, true);
      chart9.series[2].setData(PowerFactor_data, true);
      chart9.series[2].setData(PowerFactor_data, true);
      chart9.series[3].setData(Frequency_data, true);
      chart9.series[4].setData(KWH_data, true);
      chart9.series[5].setData(KVAH_data, true);

  });
  });


// card 10
  ////////////////////////capacitor_bank2 graph10 strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select10 = document.getElementById('select10');
      const chart10 = Highcharts.chart('container10', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart10.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select10.add(option);
  });

  select10.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart10.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_capacitor_bank1', 'trend_Chart_capacitor_bank1');

  socket.on("send_trend_Chart_capacitor_bank1", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart10.xAxis[0].update({
      categories: categories
    });

      chart10.series[0].setData(Voltage_data, true);
      chart10.series[1].setData(Current_data, true);
      chart10.series[2].setData(PowerFactor_data, true);
      chart10.series[2].setData(PowerFactor_data, true);
      chart10.series[3].setData(Frequency_data, true);
      chart10.series[4].setData(KWH_data, true);
      chart10.series[5].setData(KVAH_data, true);

  });
  });


// card 11
  ///////////////////////capacitor_bank2 graph11 strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select11 = document.getElementById('select11');
      const chart11 = Highcharts.chart('container11', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart11.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select11.add(option);
  });

  select11.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart11.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_capacitor_bank2', 'trend_Chart_capacitor_bank2');

  socket.on("send_trend_Chart_capacitor_bank2", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart11.xAxis[0].update({
      categories: categories
    });

      chart11.series[0].setData(Voltage_data, true);
      chart11.series[1].setData(Current_data, true);
      chart11.series[2].setData(PowerFactor_data, true);
      chart11.series[2].setData(PowerFactor_data, true);
      chart11.series[3].setData(Frequency_data, true);
      chart11.series[4].setData(KWH_data, true);
      chart11.series[5].setData(KVAH_data, true);

  });
  });



// card 12
  ////////////////////////Chart_capacitor_bank3 graph12 strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select12 = document.getElementById('select12');
      const chart12 = Highcharts.chart('container12', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart12.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select12.add(option);
  });

  select12.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart12.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_capacitor_bank3', 'trend_Chart_capacitor_bank3');

  socket.on("send_trend_Chart_capacitor_bank3", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart12.xAxis[0].update({
      categories: categories
    });

      chart12.series[0].setData(Voltage_data, true);
      chart12.series[1].setData(Current_data, true);
      chart12.series[2].setData(PowerFactor_data, true);
      chart12.series[2].setData(PowerFactor_data, true);
      chart12.series[3].setData(Frequency_data, true);
      chart12.series[4].setData(KWH_data, true);
      chart12.series[5].setData(KVAH_data, true);

  });
  });


// card 13
  ////////////////////////Chart_fire_hydrant graph13 strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select13 = document.getElementById('select13');
      const chart13 = Highcharts.chart('container13', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart13.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select13.add(option);
  });

  select13.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart13.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_fire_hydrant', 'trend_Chart_fire_hydrant');

  socket.on("send_trend_Chart_fire_hydrant", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart13.xAxis[0].update({
      categories: categories
    });

      chart13.series[0].setData(Voltage_data, true);
      chart13.series[1].setData(Current_data, true);
      chart13.series[2].setData(PowerFactor_data, true);
      chart13.series[2].setData(PowerFactor_data, true);
      chart13.series[3].setData(Frequency_data, true);
      chart13.series[4].setData(KWH_data, true);
      chart13.series[5].setData(KVAH_data, true);

  });
  });



// card 14
  ////////////////////////Chart_lighting_master graph14 strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select14 = document.getElementById('select14');
      const chart14 = Highcharts.chart('container14', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart14.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select14.add(option);
  });

  select14.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart14.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_lighting_master', 'trend_Chart_lighting_master');

  socket.on("send_trend_Chart_lighting_master", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart14.xAxis[0].update({
      categories: categories
    });

      chart14.series[0].setData(Voltage_data, true);
      chart14.series[1].setData(Current_data, true);
      chart14.series[2].setData(PowerFactor_data, true);
      chart14.series[2].setData(PowerFactor_data, true);
      chart14.series[3].setData(Frequency_data, true);
      chart14.series[4].setData(KWH_data, true);
      chart14.series[5].setData(KVAH_data, true);

  });
  });



// card 15
  ////////////////////////trend_Chart_ETP_MCC graph15 strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select15 = document.getElementById('select15');
      const chart15 = Highcharts.chart('container15', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart15.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select15.add(option);
  });

  select15.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart15.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_ETP_MCC', 'trend_Chart_ETP_MCC');

  socket.on("send_trend_Chart_ETP_MCC", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart15.xAxis[0].update({
      categories: categories
    });

      chart15.series[0].setData(Voltage_data, true);
      chart15.series[1].setData(Current_data, true);
      chart15.series[2].setData(PowerFactor_data, true);
      chart15.series[2].setData(PowerFactor_data, true);
      chart15.series[3].setData(Frequency_data, true);
      chart15.series[4].setData(KWH_data, true);
      chart15.series[5].setData(KVAH_data, true);

  });
  });



// card 16
  ////////////////////////electrical_chiller1 graph16 strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select16 = document.getElementById('select16');
      const chart16 = Highcharts.chart('container16', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart16.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select16.add(option);
  });

  select16.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart16.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_electrical_chiller1', 'trend_Chart_electrical_chiller1');

  socket.on("send_trend_Chart_electrical_chiller1", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart16.xAxis[0].update({
      categories: categories
    });

      chart16.series[0].setData(Voltage_data, true);
      chart16.series[1].setData(Current_data, true);
      chart16.series[2].setData(PowerFactor_data, true);
      chart16.series[2].setData(PowerFactor_data, true);
      chart16.series[3].setData(Frequency_data, true);
      chart16.series[4].setData(KWH_data, true);
      chart16.series[5].setData(KVAH_data, true);

  });
  });



// card 17
  ////////////////////////electrical_chiller2 graph17 strt ///////////////////////////////////////
  document.addEventListener('DOMContentLoaded', function () {
      const select17 = document.getElementById('select17');
      const chart17 = Highcharts.chart('container17', {
        xAxis: {
          categories: [] 
        },
        series: [{
          name: 'Voltage',
          id: 'Voltage',
          data: [], // Initial empty data
          color: Highcharts.getOptions().colors[0]
        }, {
          name: 'Current',
          id: 'Current',
          data: [], 
          color: Highcharts.getOptions().colors[1]
        }, {
          name: 'Power Factor',
          id: 'PowerFactor',
          data: [], 
          color: Highcharts.getOptions().colors[2]
        }, {
            name: 'Frequency',
            id: 'Frequency',
            data: [], 
            color: Highcharts.getOptions().colors[3]
          }, {
            name: 'KWH',
            id: 'KWH',
            data: [], 
            color: Highcharts.getOptions().colors[4]
          },{
            name: 'KVAH',
            id: 'KVAH',
            data: [], 
            color: Highcharts.getOptions().colors[5]
          }],
    });

  var legendNames = chart17.series.map(series => series.name);

  // Populate the dropdown with legend names
  legendNames.forEach(name => {
    var option = document.createElement('option');
    option.text = name;
    option.value = name;
    select17.add(option);
  });

  select17.addEventListener('change', function (e) {
    //console.log("Dropdown Selection Changed:", e.target.value);

    chart17.series.forEach(series => {
      if (e.target.value === 'all' || series.name === e.target.value) {
        series.show();
      } else {
        series.hide();
      }
    });
  });

  socket.emit('trend_Chart_electrical_chiller2', 'trend_Chart_electrical_chiller2');

  socket.on("send_trend_Chart_electrical_chille2", function (trend_dataArr) {
    //console.log("send_trend_Chart_process_mcc4:::::", trend_dataArr);

      var Voltage_data = [];
      var Current_data = [];
      var PowerFactor_data = [];
      var Frequency_data = [];
      var KWH_data = [];
      var KVAH_data = [];
      var categories = [];


      for (var i = 0; i < trend_dataArr.length; i += 7) {
          var Voltage = trend_dataArr[i];
          var Current = trend_dataArr[i + 1];
          var PowerFactor = trend_dataArr[i + 2];
          var Frequency = trend_dataArr[i + 3];
          var KWH = trend_dataArr[i + 4];
          var KVAH = trend_dataArr[i + 5];
          var date_time = trend_dataArr[i + 6];

          console.log("date_time:::::", date_time);
          var date_time = date_time.toString();
          if (date_time !== undefined) {
            var parts = date_time.split(" ");

          // Get the time part
          var timePart = parts[1];
          console.log('parts',parts)
          // Split the time part into hours, minutes, and seconds
          var timeParts = timePart.split(":");
          console.log('timeParts',timeParts)
          // Extract hours, minutes, and seconds
          var hours = parseInt(timeParts[0]);
          var minutes = parseInt(timeParts[1]);
          var seconds = parseInt(timeParts[2]);

            var formattedTime =  hours + ':' + minutes + ' hr';
            //console.log("formattedTime:::::", formattedTime);
            categories.push(formattedTime);

            Voltage_data.push(parseFloat(Voltage));
            Current_data.push(parseFloat(Current));
            PowerFactor_data.push(parseFloat(PowerFactor));
            Frequency_data.push(parseFloat(Frequency));
            KWH_data.push(parseFloat(KWH));
            KVAH_data.push(parseFloat(KVAH));

          }
        }

    chart17.xAxis[0].update({
      categories: categories
    });

      chart17.series[0].setData(Voltage_data, true);
      chart17.series[1].setData(Current_data, true);
      chart17.series[2].setData(PowerFactor_data, true);
      chart17.series[2].setData(PowerFactor_data, true);
      chart17.series[3].setData(Frequency_data, true);
      chart17.series[4].setData(KWH_data, true);
      chart17.series[5].setData(KVAH_data, true);

  });
  });



</script>

</body>
</html>
